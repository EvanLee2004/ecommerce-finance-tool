# 电商财务通 - 快速启动指南

## ✅ 已完成的修复

1. ✔️ 修复了 TypeScript 类型定义错误
2. ✔️ 重建了后端 Python 服务（原文件损坏）
3. ✔️ 配置了 Python 虚拟环境并安装依赖
4. ✔️ 创建了环境变量配置文件
5. ✔️ 优化了错误处理和用户提示
6. ✔️ 添加了文件验证功能

## 🚀 启动步骤

### 1. 启动后端服务

```bash
# 进入项目目录
cd "/Users/evanlee/Documents/项目/电商平台/电商财务通 (1)"

# 激活虚拟环境并启动后端
.venv/bin/python backend/main.py
```

后端将在 `http://localhost:8000` 运行

### 2. 启动前端服务

打开新的终端窗口：

```bash
# 进入项目目录
cd "/Users/evanlee/Documents/项目/电商平台/电商财务通 (1)"

# 启动开发服务器
npm run dev
```

前端将在 `http://localhost:5173` 运行（Vite 默认端口）

### 3. 访问应用

在浏览器中打开：`http://localhost:5173`

## 📝 使用说明

### 数据导入功能
- 支持拖拽或点击上传文件
- 文件格式：`.csv`、`.xlsx`、`.xls`
- 文件大小限制：50MB
- 自动识别列名，无需手动调整表格格式

### 文件要求

**淘宝订单文件**应包含列：
- 订单编号/订单号
- 店铺名称/店铺
- 商品名称/SKU
- 成本价/成本
- 买家实际支付金额/应收金额
- 付款时间/日期

**京东订单文件**应包含列：
- 订单号/订单编号
- 店铺名称/店铺
- 商品名称/SKU
- 成本价/成本
- 订单金额/应收金额
- 下单时间/订单时间

**银行流水文件**应包含列：
- 订单号/商户订单号
- 金额/交易金额

## 🎯 核心功能

1. **智能对账** - 自动匹配订单和支付流水
2. **异常识别** - 标记金额异常和缺少流水的订单
3. **财务分析** - 计算毛利率、平台对比、TOP SKU
4. **数据导出** - 支持 CSV 格式导出对账结果

## 💡 离线模式

如果后端服务未启动，系统会自动切换到**演示模式**，使用模拟数据展示功能，方便体验界面。

## 🔧 技术栈

- **前端**: React 19 + TypeScript + Vite + Tailwind CSS
- **后端**: FastAPI + Python 3.12 + Pandas
- **图表**: Recharts
- **图标**: Lucide React

## 📦 依赖管理

如需重新安装依赖：

```bash
# 前端依赖
npm install

# 后端依赖
.venv/bin/pip install -r requirements.txt
```

## 🐛 故障排除

### 后端无法启动
- 确保 Python 虚拟环境已激活
- 检查端口 8000 是否被占用
- 查看终端错误信息

### 前端编译错误
- 运行 `npm install` 确保依赖完整
- 清除缓存：`rm -rf node_modules dist && npm install`

### 文件上传失败
- 检查文件格式是否为 CSV 或 Excel
- 确认文件大小不超过 50MB
- 查看浏览器控制台错误信息

## 📧 需要帮助？

遇到问题时：
1. 查看浏览器开发者工具的 Console 标签
2. 查看后端终端的错误输出
3. 确认文件格式符合要求

---

**系统状态**: ✅ 所有问题已修复，可以正常运行
**最后更新**: 2025年12月5日
